# Generated by: xandri03

# R0 - framepointer
# R1 - expression result / function return value
ALIAS FP $0
SET $0 0
SET $1 0

# call main, exit afterwards
CALL [$SP] ::main
JUMP @exit

# ***** GLOBAL FUNCTIONS *****

# ----------------------
LABEL ::foo
SET $FP $SP
ADDI $SP $SP 0


ADDI $SP $SP 1
SET [$SP] [$FP-1]
ADDI $SP $SP 1
SET [$SP] 10
LTI $1 [$SP-1] [$SP]
SUBI $SP $SP 1
SET [$SP] $1
ADDI $SP $SP 1
SET [$SP] [$FP-1]
ADDI $SP $SP 1
SET [$SP] 10
EQI $1 [$SP-1] [$SP]
SUBI $SP $SP 1
SET [$SP] $1
OR $1 [$SP-1] [$SP]
SUBI $SP $SP 1
SET [$SP] $1
SET $1 [$SP]
SUBI $SP $SP 1
JUMPZ ::foo:0:else $1

ADDI $SP $SP 1
SET [$SP] [$FP-1]
SET $1 [$SP]
SUBI $SP $SP 1
SET $SP $FP
RETURN [$FP]
JUMP ::foo:0:end_if
LABEL ::foo:0:else
LABEL ::foo:0:end_if

ADDI $SP $SP 1
SET [$SP] [$FP-1]
SET $1 [$SP]
SUBI $SP $SP 1
WRITEI $1
ADDI $SP $SP 1
SET [$SP] "\n"
SET $1 [$SP]
SUBI $SP $SP 1
WRITES $1

ADDI $SP $SP 1
SET [$SP] [$FP-1]
ADDI $SP $SP 1
SET [$SP] 1
SUBI $1 [$SP-1] [$SP]
SUBI $SP $SP 1
SET [$SP] $1
SET [$FP-1] [$SP]
SUBI $SP $SP 1

ADDI $SP $SP 1
SET [$SP] $FP
ADDI $SP $SP 1
SET [$SP] [$FP-1]
ADDI $SP $SP 1
CALL [$SP] ::foo
SUBI $SP $SP 2
SET $FP [$SP]
SUBI $SP $SP 1

# Hard return
SET $1 0
SET $SP $FP
RETURN [$FP]

# ----------------------
LABEL ::length
SET $FP $SP
ADDI $SP $SP 0

GETSIZE $1 [$SP-1]

# Hard return
SET $1 0
SET $SP $FP
RETURN [$FP]

# ----------------------
LABEL ::subStr
SET $FP $SP
ADDI $SP $SP 0

WRITES "LOL"

# Hard return
SET $1 ""
SET $SP $FP
RETURN [$FP]

# ----------------------
LABEL ::main
SET $FP $SP
ADDI $SP $SP 2


SET [$FP+1] ""

SET [$FP+2] ""

ADDI $SP $SP 1
SET [$SP] "a"
SET [$FP+1] [$SP]
SUBI $SP $SP 1

ADDI $SP $SP 1
SET [$SP] "b"
SET [$FP+2] [$SP]
SUBI $SP $SP 1

ADDI $SP $SP 1
SET [$SP] "asdfza"
ADDI $SP $SP 1
SET [$SP] "asdfg"
LTS $1 [$SP-1] [$SP]
SUBI $SP $SP 1
SET [$SP] $1
SET $1 [$SP]
SUBI $SP $SP 1
JUMPZ ::main:0:else $1

ADDI $SP $SP 1
SET [$SP] "true\n"
SET $1 [$SP]
SUBI $SP $SP 1
WRITES $1
JUMP ::main:0:end_if
LABEL ::main:0:else
LABEL ::main:0:end_if

# Hard return
SET $SP $FP
RETURN [$FP]


# ***** CLASSES *****

# TODO

LABEL @exit

